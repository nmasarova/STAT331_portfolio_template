---
title: "STAT 331 Portfolio"
author: "Natalie Masarova"
format: html 
embed-resources: true
layout: margin-left
editor: visual
execute: 
  eval: false
  echo: true
---

[**My Grade:**]{.underline} I believe my grade equivalent to course work evidenced below to be a A-.

[**Learning Objective Evidence:**]{.underline} In the code chunks below, provide code from Lab or Challenge assignments where you believe you have demonstrated proficiency with the specified learning target. Be sure to specify **where** the code came from (e.g., Lab 4 Question 2).

## Working with Data

**WD-1: I can import data from a *variety* of formats (e.g., csv, xlsx, txt, etc.).**

-   `csv` Example 1

```{r}
#| label: wd-1-csv-1
# From Lab 2, Problem 1
surveys <- read_csv(here::here("week_2", "surveys.csv"))
```

-   `csv` Example 2

```{r}
#| label: wd-1-csv-2
# From Lab 3, Problem 2
teacher_evals <- read_csv(here::here("week_3", "teacher_evals.csv"))
```

-   `xlsx`

```{r}
#| label: wd-1-xlsx
# From PA 4, Problem 1
military <- read_xlsx("gov_spending_per_capita.xlsx",
                      sheet = "Share of Govt. spending",
                      skip  = 7,
                      n_max = 191,
                      na = c("xxx", "..", ". ."))
```

**WD-2: I can select necessary columns from a dataset.**

-   Example selecting specified columns

```{r}
#| label: wd-2-ex-1
# From Lab 3, Question 5
teacher_evals_clean <- teacher_evals |>
  select(
    course_id, teacher_id, question_no, no_participants, resp_share, SET_score_avg,
    percent_failed_cur, academic_degree, seniority, sex )
```

-   Example removing specified columns

```{r}
#| label: wd-2-ex-2
# From Lab 3, Question 5 Revised
# Simply changed it to remove these columns instead of selecting them, to show this action
teacher_evals_clean <- teacher_evals |>
  select(
    -course_id,
    -teacher_id, 
    -question_no, 
    -no_participants, 
    -resp_share)
```

-   Example selecting columns based on logical values (e.g., `starts_with()`, `ends_with()`, `contains()`, `where()`)

```{r}
#| label: wd-2-ex-3
#From Lab 3, Question 5 Revised
# Changed it to select columns that contain "id", to show this action
teacher_evals_clean <- teacher_evals |>
  select(contains("id"))
```

**WD-3: I can filter rows from a dataframe for a *variety* of data types (e.g., numeric, integer, character, factor, date).**

-   Numeric Example 1

```{r}
#| label: wd-3-numeric-ex-1
# From Lab 3, Question 5
teacher_evals_clean <- teacher_evals |>
  filter(no_participants > 10)
```

-   Numeric Example 2

```{r}
#| label: wd-3-numeric-ex-2
# From Lab 4, Question 5
region_table <- ca_childcare |>
  filter(study_year %in% c(2008, 2018))
```

-   Character Example 1 (any context)

```{r}
#| label: wd-3-character
# Challenge 4
ca_childcare <- counties |>
  filter(
    state_name == "California")
```

-   Character Example 2 (example must use functions from **stringr**)

```{r}
#| label: wd-3-string
# From Lab 5
person1 <- person |>
  filter(
    gender == "male",
    str_detect(plate_number, pattern = "H42"),
    membership_status == "gold",
    str_detect(member_id, pattern = "48Z"))
```

-   Date (example must use functions from **lubridate**)

```{r}
#| label: wd-3-date
# From Lab 5, Revised, originally had filtered based on other factors, so I added this one in
person1 <- person |>
  filter(
    gender == "male",
    str_detect(plate_number, pattern = "H42"),
    membership_status == "gold",
    str_detect(member_id, pattern = "48Z"),
    year(check_in_date) == 2017, month(check_in_date) == 12)
```

**WD-4: I can modify existing variables and create new variables in a dataframe for a *variety* of data types (e.g., numeric, integer, character, factor, date).**

-   Numeric Example 1

```{r}
#| label: wd-4-numeric-ex-1
# From Lab 3, Question 5
teacher_evals_clean <- teacher_evals |>
  mutate(
    teacher_id = as.character(teacher_id),
    weekday =  as.character(weekday))
```

-   Numeric Example 2

```{r}
#| label: wd-4-numeric-ex-2
# From Challenge 3, Question 1
teacher_evals_compare <- teacher_evals |>
  mutate(
    set_level = if_else(SET_score_avg >= 4, "Excellent", "Standard"),
    sen_level = case_when(
      seniority <= 4 ~ "Junior",
      seniority >= 5 & seniority <= 8 ~ "Senior",
      seniority > 8 ~ "Very Senior"))
```

-   Factor Example 1 (renaming levels)

```{r}
#| label: wd-4-factor-ex-1
# Lab 4, Question 7
center_childcare <- ca_childcare |>
  mutate(
    age_group = case_when(
      age_group == "mc_infant" ~ "Infant",
      age_group == "mc_toddler" ~ "Toddler",
      age_group == "mc_preschool" ~ "Preschool")) |>
  mutate(
    census_region = fct_reorder(census_region, 
                                as.numeric(factor(census_region)), .desc = FALS),
    age_group = fct_reorder(age_group, 
                            as.numeric(factor(age_group)), .desc = FALSE))
```

-   Factor Example 2 (reordering levels)

```{r}
#| label: wd-4-factor-ex-2
# Lab 4, Question 7
center_childcare <- ca_childcare |>
  mutate(
    age_group = case_when(
      age_group == "mc_infant" ~ "Infant",
      age_group == "mc_toddler" ~ "Toddler",
      age_group == "mc_preschool" ~ "Preschool")) |>
  mutate(
    census_region = fct_reorder(census_region, 
                                as.numeric(factor(census_region)), .desc = FALS),
    age_group = fct_reorder(age_group, 
                            as.numeric(factor(age_group)), .desc = FALSE))
```

-   Character (example must use functions from **stringr**)

```{r}
#| label: wd-4-string
# Lab 5, Revised to include str_detect
suspects1 <- facebook_event_checkin |>
  mutate(date = as.character(date)) |>
  filter(
    event_name == "SQL Symphony Concert",
    str_detect("201712"))
```

-   Date (example must use functions from **lubridate**)

```{r}
#| label: wd-4-date
# From Lab 5
person1 <- person |>
  mutate(check_in_date = ymd(check_in_date)) |>
  filter(
    gender == "male",
    str_detect(plate_number, pattern = "H42"),
    membership_status == "gold",
    str_detect(member_id, pattern = "48Z"))
```

**WD-5: I can use mutating joins to combine multiple dataframes.**

-   `left_join()` Example 1

```{r}
#| label: wd-5-left-ex-1
# Challenge 4
ca_childcare <- counties |>
  left_join(
    y = childcare_costs,
    by = join_by(county_fips_code))
```

-   `right_join()` Example 1

```{r}
#| label: wd-5-right
# Challenge 4, Edited
# Changed my pipeline to be a right join instead
ca_childcare <- childcare_costs |>
  right_join(
    x = counties,
    by = join_by(county_fips_code))
```

-   `left_join()` **or** `right_join()` Example 2

```{r}
#| label: wd-5-left-right-ex-2
# From Lab 5
person1 <- person |>
  left_join(
    get_fit_now_member |>
    rename(member_id = id),
    by = join_by (name == name)) |>
  left_join(
    drivers_license,
    by = join_by (license_id == id)) |>
  left_join(
    get_fit_now_check_in,
    by = join_by (member_id == membership_id))
```

-   `inner_join()` Example 1

```{r}
#| label: wd-5-inner-ex-1
# Challenge 4, Edited
# Changed my pipeline to be an inner join instead
ca_childcare <- counties |>
  inner_join(
    y = childcare_costs,
    by = join_by(county_fips_code))
```

-   `inner_join()` Example 2

```{r}
#| label: wd-5-inner-ex-2
# From Lab 5, Edited
# Changed my pipeline to be an inner join instead
person1 <- person |>
  inner_join(
    y = get_fit_now_member,
    rename(member_id = id),
    by = join_by (name == name))
```

**WD-6: I can use filtering joins to filter rows from a dataframe.**

-   `semi_join()`

```{r}
#| label: wd-6-semi
# From Lab 5, Edited
# Changed my pipeline from a left join to be a semi join instead, to get info for people present in both tables
suspectinterview <- person |>
  semi_join(interview, by = c("id" = "person_id"))
```

-   `anti_join()`

```{r}
#| label: wd-6-anti
# Lab 5, Edited
# Changed my pipeline from a left join to be an anti join instead, to get the people who didn't have an interview
suspectinterview <- person |>
  anti_join(interview, by = c("id" = "person_id"))
```

**WD-7: I can pivot dataframes from long to wide and visa versa**

-   `pivot_longer()`

```{r}
#| label: wd-7-long
# From Challenge 4
childcare_vs_poverty <- ca_childcare |>
  select(mc_infant, mc_toddler, mc_preschool, mfcc_infant, mfcc_preschool, mfcc_toddler, pr_f) |>
  pivot_longer(
    cols = starts_with("mc"),
    names_to = "center_age_group",
    values_to = "median_center_cost") |>
  mutate(
    center_age_group = case_when(
      center_age_group == "mc_infant" ~ "Infant",
      center_age_group == "mc_toddler" ~ "Toddler",
      center_age_group == "mc_preschool" ~ "Preschool")) |>
  pivot_longer(
    cols = starts_with("mfcc"),
    names_to = "home_age_group",
    values_to = "median_home_cost")
```

-   `pivot_wider()`

```{r}
#| label: wd-7-wide
# From Lab 4, Question 5
region_table <- ca_childcare |>
  filter(study_year %in% c(2008, 2018)) |>
  group_by (census_region, study_year) |>
  summarize(median_income = median(mhi_2018)) |>
  ungroup() |>
  pivot_wider(names_from = study_year, values_from = median_income, names_prefix = "Year ")
```

## Reproducibility

**R-1: I can create professional looking, reproducible analyses using RStudio projects, Quarto documents, and the here package.**

The following assignments satisfy the above criteria:

-   Example 1: Lab 2
-   Example 2: Challenge 3
-   Example 3: Lab 4
-   Example 4: Lab 8
-   Example 5: Lab 9

**R-2: I can write well documented and tidy code.**

-   Example of **ggplot2** plotting

```{r}
#| label: r-2-1
# Lab 4, Question 8
ca_childcare |>
  filter() |>
  ggplot(aes(x = mhi_2018, y = mfcc_infant)) +
  theme_light() +
  geom_point(alpha = 0.5, color = "plum") +
  geom_smooth(method = "lm", se = FALSE, color = "mediumorchid4") +
  labs(
    title = "Median Income (per Household) vs. Weekly Infant Childcare Cost (in California)",
    x = "Median Household Income",
    y = "Median Weekly Infant Cost") +
  scale_y_continuous(labels = scales:: label_currency(prefix = "$"))+
  scale_x_continuous(labels = scales:: label_currency(prefix = "$"))
```

-   Example of **dplyr** pipeline

```{r}
#| label: r-2-2
# Lab 4, Question 7
center_childcare <- ca_childcare |>
  select(census_region, mc_infant, 
         mc_toddler, mc_preschool, study_year) |>
  pivot_longer(
    cols = starts_with("mc"),
    names_to = "age_group",
    values_to = "median_cost") |>
  mutate(
    age_group = case_when(
      age_group == "mc_infant" ~ "Infant",
      age_group == "mc_toddler" ~ "Toddler",
      age_group == "mc_preschool" ~ "Preschool")) |>
  mutate(
    census_region = fct_reorder(census_region, 
                                as.numeric(factor(census_region)), 
                                .desc = FALSE),
    age_group = fct_reorder(age_group, 
                            as.numeric(factor(age_group)), 
                            .desc = FALSE))
```

-   Example of function formatting

```{r}
#| label: r-2-3
# From Lab 8, Problem 1
rescale_01 <- function(x){
  if(!is.numeric(x)){
    stop("Please provide a numeric input for the x argument.")
  }
  if(length(x) == 1){
    stop("Please provide a vector of at least length 2")
  }
  return(x - min(x, na.rm = TRUE)) / (max(x, na.rm = TRUE) - min(x, na.rm = TRUE))
}
```

**R-3: I can write robust programs that are resistant to changes in inputs.**

-   Example (any context)

```{r}
#| label: r-3-example
# From Lab 3, Question 5
teacher_evals_clean <- teacher_evals |>
  rename(sex = gender) |>
  filter( no_participants > 10) |>
  mutate(
    teacher_id = as.character(teacher_id),
    weekday =  as.character(weekday)) |>
  select(
    course_id, teacher_id, question_no, no_participants, resp_share, 
    SET_score_avg, percent_failed_cur, academic_degree, seniority, sex )
```

-   Example (function stops)

```{r}
#| label: r-3-function-stops
# From Lab 8, Problem 1
rescale_01 <- function(x){
  if(!is.numeric(x)){
    stop("Please provide a numeric input for the x argument.")
  }
  if(length(x) == 1){
    stop("Please provide a vector of at least length 2")
  }
  return(x - min(x, na.rm = TRUE)) / (max(x, na.rm = TRUE) - min(x, na.rm = TRUE))
}
```

## Data Visualization & Summarization

**DVS-1: I can create visualizations for a *variety* of variable types (e.g., numeric, character, factor, date)**

-   At least two numeric variables

```{r}
#| label: dvs-1-num
# Lab 4, Question 8
ca_childcare |>
  filter() |>
  ggplot(aes(x = mhi_2018, y = mfcc_infant)) +
  theme_light() +
  geom_point(alpha = 0.5, color = "plum") +
  geom_smooth(method = "lm", se = FALSE, color = "mediumorchid4") +
  labs(
    title = "Median Income (per Household) vs. Weekly Infant Childcare Cost (in California)",
    x = "Median Household Income",
    y = "Median Weekly Infant Cost") +
  scale_y_continuous(labels = scales:: label_currency(prefix = "$"))+
  scale_x_continuous(labels = scales:: label_currency(prefix = "$"))
```

-   At least one numeric variable and one categorical variable

```{r}
#| label: dvs-2-num-cat
# Lab 2, Question 15
ggplot(data = surveys,
    mapping = aes(x = species, y = weight))+
  geom_boxplot(outliers = FALSE)+
  geom_jitter(color= "pink", alpha = 0.5)+
  theme(axis.text.x = element_text(size = 0.25))+
  labs(
    title = "Distribution of Weights",
    x = "Species",
    y = "Weight in Grams")+
  theme(
    plot.title = element_text(size = rel(2)),
    panel.border = element_rect(linetype = "dashed", color = "gray"),
    legend.position = "inside",
    legend.justification = c("right", "top"),
    legend.direction = "horizontal",
    legend.key.size = unit(.5, "cm"))
```

-   At least two categorical variables

```{r}
#| label: dvs-2-cat
# Lab 3, Question 3
ggplot(teacher_evals_compare,
       aes(x = sen_level, fill = set_level)) +
  geom_bar(position = "fill") +
  labs(
    x = "Years of Experience",
    y = "",
    fill = "Set Level",
    title = "Evaluation of Teachers' Use of Activities") +
  scale_y_continuous(labels = scales::percent)+
  scale_fill_manual(
    values = c("Excellent" = "#C8A2C8", "Standard" = "#C19A6B")) +
  theme(legend.position = "top", 
        axis.text.x = element_text(size = 6),
        axis.title.x = element_text(size = 8),
        legend.text = element_text(size = 8),
        legend.title = element_text(size = 9),
        plot.title = element_text(size = 10, hjust = 0),) +
  theme_bw()
```

-   Dates (time series plot)

```{r}
#| label: dvs-2-date
# Lab 4, Problem 7
ggplot(data = center_childcare,
       aes( x = study_year, y = median_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 1.5) +
  geom_smooth() +
  facet_wrap(~age_group) +
  theme_bw(base_size = 10) +
  labs(
    title = "Weekly Median price for Center-Based Childcare ($)",
    x = "Study Year",
    color = "California Region",
    y = "") +
  theme(axis.text.x = element_text(size = 6),
        axis.text.y = element_text(size = 6),
        aspect.ratio = 1,
        plot.title = element_text(size = 10),  
        legend.text = element_text(size = 7),  
        legend.title = element_text(size = 8)) +
  scale_color_manual(values = colorRampPalette(brewer.pal(7, "Accent"))(10))
```

**DVS-2: I use plot modifications to make my visualization clear to the reader.**

-   I can modify my plot theme to be more readable

```{r}
#| label: dvs-2-ex-1
# Lab 2, Question 15
ggplot(data = surveys,
    mapping = aes(x = species, y = weight))+
  geom_boxplot(outliers = FALSE)+
  geom_jitter(color= "pink", alpha = 0.5)+
  theme(axis.text.x = element_text(angle = 4))+
  labs(
    title = "Distribution of Weights",
    x = "Species",
    y = "Weight in Grams")+
  theme(
    plot.title = element_text(size = rel(2)),
    panel.border = element_rect(linetype = "dashed", color = "gray"),
    legend.position = "inside",
    legend.justification = c("right", "top"),
    legend.direction = "horizontal",
    legend.key.size = unit(.5, "cm"))
```

-   I can modify my colors to be accessible to anyone's eyes

```{r}
#| label: dvs-2-ex-2
# Lab 4, Question 8, Revised
# Changed colors to be accessible to anyone's eyes, searched up which colors are best, blue and orange was said to be distinguishable even for color blind viewers
ca_childcare |>
  filter() |>
  ggplot(aes(x = mhi_2018, y = mfcc_infant)) +
  theme_light() +
  geom_point(alpha = 0.5, color = "steelblue") +
  geom_smooth(method = "lm", se = FALSE, color = "orange2") +
  labs(
    title = "Median Income (per Household) vs. Weekly Infant Childcare Cost (in California)",
    x = "Median Household Income",
    y = "Median Weekly Infant Cost") +
  scale_y_continuous(labels = scales:: label_currency(prefix = "$"))+
  scale_x_continuous(labels = scales:: label_currency(prefix = "$"))
```

-   I can modify my plot titles to clearly communicate the data context

```{r}
#| label: dvs-2-ex-3
# Lab 4, Question 7
ggplot(data = center_childcare,
       aes( x = study_year, y = median_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 1.5) +
  geom_smooth() +
  facet_wrap(~age_group) +
  theme_bw(base_size = 10) +
  labs(
    title = "Weekly Median price for Center-Based Childcare ($)",
    x = "Study Year",
    color = "California Region",
    y = "") +
  theme(axis.text.x = element_text(size = 6),
        axis.text.y = element_text(size = 6),
        aspect.ratio = 1,
        plot.title = element_text(size = 10),  
        legend.text = element_text(size = 7),  
        legend.title = element_text(size = 8)) +
  scale_color_manual(values = colorRampPalette(brewer.pal(7, "Accent"))(10))
```

-   I can modify the text in my plot to be more readable

```{r}
#| label: dvs-2-ex-4
# Lab 4, Question 7
ggplot(data = center_childcare,
       aes( x = study_year, y = median_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 1.5) +
  geom_smooth() +
  facet_wrap(~age_group) +
  theme_bw(base_size = 10) +
  labs(
    title = "Weekly Median price for Center-Based Childcare ($)",
    x = "Study Year",
    color = "California Region",
    y = "") +
  theme(axis.text.x = element_text(size = 6),
        axis.text.y = element_text(size = 6),
        aspect.ratio = 1,
        plot.title = element_text(size = 10),  
        legend.text = element_text(size = 7),  
        legend.title = element_text(size = 8)) +
  scale_color_manual(values = colorRampPalette(brewer.pal(7, "Accent"))(10))
```

-   I can reorder my legend to align with the colors in my plot

```{r}
#| label: dvs-2-ex-5
# Lab 4, Question 7, Revised
# Fixed to ensure ordered legend
center_childcare |>
  arrange(study_year) |>
  mutate(census_region = 
           factor(census_region,
            levels = unique(census_region))) |>
  ggplot(aes( x = study_year, y = median_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 1.5) +
  geom_smooth() +
  facet_wrap(~age_group) +
  theme_bw(base_size = 10) +
  labs(
    title = "Weekly Median price for Center-Based Childcare ($)",
    x = "Study Year",
    color = "California Region",
    y = "") +
  theme(axis.text.x = element_text(size = 6),
        axis.text.y = element_text(size = 6),
        aspect.ratio = 1,
        plot.title = element_text(size = 10),  
        legend.text = element_text(size = 7),  
        legend.title = element_text(size = 8)) +
  scale_color_manual(values = colorRampPalette(brewer.pal(7, "Accent"))(10))
```

**DVS-3: I show creativity in my visualizations**

-   I can use non-standard colors (Example 1)

```{r}
#| label: dvs-3-1-ex-1
# Lab 4, Question 8
ca_childcare |>
  filter() |>
  ggplot(aes(x = mhi_2018, y = mfcc_infant)) +
  theme_light() +
  geom_point(alpha = 0.5, color = "plum") +
  geom_smooth(method = "lm", se = FALSE, color = "mediumorchid4") +
  labs(
    title = "Median Income (per Household) vs. Weekly Infant Childcare Cost (in California)",
    x = "Median Household Income",
    y = "Median Weekly Infant Cost") +
  scale_y_continuous(labels = scales:: label_currency(prefix = "$"))+
  scale_x_continuous(labels = scales:: label_currency(prefix = "$"))
```

-   I can use non-standard colors (Example 2)

```{r}
#| label: dvs-3-1-ex-2
# Lab 4, Question 7
ggplot(data = center_childcare,
       aes( x = study_year, y = median_cost, color = census_region)) +
  geom_point(alpha = 0.5, size = 1.5) +
  geom_smooth() +
  facet_wrap(~age_group) +
  theme_bw(base_size = 10) +
  labs(
    title = "Weekly Median price for Center-Based Childcare ($)",
    x = "Study Year",
    color = "California Region",
    y = "") +
  theme(axis.text.x = element_text(size = 6),
        axis.text.y = element_text(size = 6),
        aspect.ratio = 1,
        plot.title = element_text(size = 10),  
        legend.text = element_text(size = 7),  
        legend.title = element_text(size = 8),
        strip.text = element_text(size = 9),
        legend.spacing.y = unit(0.001, "lines")) +
  scale_color_manual(values = colorRampPalette(brewer.pal(7, "Accent"))(10))
```

-   I can use annotations (e.g., `geom_text()`)

```{r}
#| label: dvs-3-2
# From Lab 7, Problem 3
fish_clean <-fish |>
  mutate(
    trip = fct_recode(
      as.factor(trip),
      "Trip 1" = "1",
      "Trip 2" = "2" )) |>
  filter(is.na(weight)) |>
  group_by(species) |>
  ggplot(aes(x = year, fill = species)) +
  geom_histogram(position = "dodge") +
  scale_fill_manual(
    values = c("Brown" = "brown3",
               "Bull" = "lightskyblue",
               "RBT" = "rosybrown1",
               "WCT" = "darkseagreen")) +
  facet_wrap(~trip) +
  theme_light() +
  geom_text(
    stat = "bin",
    aes(label = ifelse(after_stat(count) > 50, after_stat(count), "")),
    vjust = -1, 
    binwidth = 0.1,
    size = 2) +
  labs(
    title = "Looking at the Frequency of Missing Values based on Species",
    x = "Year",
    y = "Count")
```

-   I can choose creative geometries (e.g., `geom_segment()`, `geom_ribbon)()`)

```{r}
#| label: dvs-3-3
# Lab 10, Problem 13
ci_results |> 
  mutate(
    row_index = row_number(),
    color_group = ifelse(cover == 1, "palegreen3", "indianred3")) |>
  ggplot(aes(x = estimate, y = row_index)) +
  geom_errorbar(
    aes(xmin = conf.low, xmax = conf.high, colour = color_group),
    width = 0.2) +
  scale_colour_identity() +  
  labs(
    title = "95% Confidence Intervals",
    subtitle = "Observing how many capture the real slope of 0.5",
    x = "Slope Estimates",
    y = "Simulation Number") +
  theme_light() +
  theme(legend.position = "none")

```

**DVS-4: I can calculate numerical summaries of variables.**

-   Example using `summarize()`

```{r}
#| label: dvs-4-summarize
# From Lab 3, Question 6
teacher_evals_clean |>
  summarize(
    n_distinct(course_id),
    n_distinct(teacher_id))
```

-   Example using `across()`

```{r}
#| label: dvs-4-across
#From Lab 3, Question 8
teacher_evals_na <- teacher_evals_clean |>
  filter(if_any(everything(), is.na)) |>
  select(teacher_id, course_id, where(~ any(is.na(.))))
```

**DVS-5: I can find summaries of variables across multiple groups.**

-   Example 1

```{r}
#| label: dvs-5-1
# From Lab 3, Question 9
teacher_evals_allqs <- teacher_evals_clean |>
  group_by(teacher_id) |>
  summarize(n_questions = n_distinct(question_no))
```

-   Example 2

```{r}
#| label: dvs-5-2
# From Lab 4, Question 5
region_table <- ca_childcare |>
  filter(study_year %in% c(2008, 2018)) |>
  group_by (census_region, study_year) |>
  summarize(median_income = median(mhi_2018))
```

**DVS-6: I can create tables which make my summaries clear to the reader.**

-   I can modify my column names to clearly communicate the data context

```{r}
#| label: dvs-6-ex-1
# From Lab 9, Problem 3
df <- surveys |>
  map_chr(~ class(.x)) |>
  enframe(name = "Variable", value = "DataType") |>
  arrange(DataType) |>
  select(DataType, Variable) |>
  kable(
    format = "html",
    caption = "Classifications of Parameters in an Ecological Study conducted near Portal, AZ",
    col.names = c("Data Type", "Variable"),
    booktabs = TRUE,
    vline = TRUE) |>
  row_spec(1, bold = TRUE, color = "white", background = "thistle") |>
  row_spec(2:8, bold = TRUE, color = "white", background = "palegreen3") |>
  row_spec(9:15, bold = TRUE, color = "white", background = "skyblue2") |>
  kable_classic(full_width = FALSE) |>
  column_spec(1, bold = T, border_right = T)|>
  collapse_rows(
    columns = 1,
    valign = "middle") |>
  row_spec(0, bold = TRUE) |>
  kable_styling()
```

-   I can modify the text in my table to be more readable (e.g., bold face for column headers)

```{r}
#| label: dvs-6-ex-2
# From Lab 9, Problem 3
df <- surveys |>
  map_chr(~ class(.x)) |>
  enframe(name = "Variable", value = "DataType") |>
  arrange(DataType) |>
  select(DataType, Variable) |>
  kable(
    format = "html",
    caption = "Classifications of Parameters in an Ecological Study conducted near Portal, AZ",
    col.names = c("Data Type", "Variable"),
    booktabs = TRUE,
    vline = TRUE) |>
  row_spec(1, bold = TRUE, color = "white", background = "thistle") |>
  row_spec(2:8, bold = TRUE, color = "white", background = "palegreen3") |>
  row_spec(9:15, bold = TRUE, color = "white", background = "skyblue2") |>
  kable_classic(full_width = FALSE) |>
  column_spec(1, bold = T, border_right = T)|>
  collapse_rows(
    columns = 1,
    valign = "middle") |>
  row_spec(0, bold = TRUE) |>
  kable_styling()
```

-   I can arrange my table to have an intuitive ordering

```{r}
#| label: dvs-6-ex-3
# From Lab 9, Problem 3
df <- surveys |>
  map_chr(~ class(.x)) |>
  enframe(name = "Variable", value = "DataType") |>
  arrange(DataType) |>
  select(DataType, Variable) |>
  kable(
    format = "html",
    caption = "Classifications of Parameters in an Ecological Study conducted near Portal, AZ",
    col.names = c("Data Type", "Variable"),
    booktabs = TRUE,
    vline = TRUE) |>
  row_spec(1, bold = TRUE, color = "white", background = "thistle") |>
  row_spec(2:8, bold = TRUE, color = "white", background = "palegreen3") |>
  row_spec(9:15, bold = TRUE, color = "white", background = "skyblue2") |>
  kable_classic(full_width = FALSE) |>
  column_spec(1, bold = T, border_right = T)|>
  collapse_rows(
    columns = 1,
    valign = "middle") |>
  row_spec(0, bold = TRUE) |>
  kable_styling()
```

**DVS-7: I show creativity in my tables.**

-   I can use non-default colors

```{r}
#| label: dvs-7-ex-1
# From Lab 9, Question 6
evals |>
  map_at(.at = c("academic_degree", "seniority", "sex"), .f = convert_to_factor) |>
  bind_cols() |>
  rename(
    `Academic Degree` = academic_degree,
    Sex = sex) |>
  mutate(
    `Academic Degree` = fct_recode(
      `Academic Degree`,
      "No Degree" = "no_dgr",
      "Masters"   = "ma",
      "Doctorate" = "dr",
      "Tenured Professor" = "prof"),
    Seniority = case_when(
      seniority %in% (0:5) ~ "Junior",
      seniority %in% (4:9) ~ "Senior",
      seniority %in% (8:12) ~ "Very Senior"),
    Sex = fct_recode(
      Sex,
      "Female" = "female",
      "Male"   = "male")) |>
  pivot_longer(
    cols = c(`Academic Degree`, Seniority, Sex),
    names_to = "Demographic",
    values_to = "Group") |>
  count(Demographic, Group) |>
  group_by(Demographic) |>
  mutate("%" = n *100 / sum(n)) |>
  rename("Count" = n)|>
  ungroup() |>
  kable(
    format = "html",
    caption = "Examining Counts/Proportions of Demographics for Professors in a University in Poland",
    booktabs = TRUE,
    vline = TRUE) |>
  row_spec(1:4, bold = TRUE, color = "white", background = "thistle") |>
  row_spec(5:7, bold = TRUE, color = "white", background = "palegreen3") |>
  row_spec(8:9, bold = TRUE, color = "white", background = "skyblue2") |>
  kable_styling(
    full_width = FALSE,
    bootstrap_options = "striped") |>
  column_spec(1, bold = T)|>
  collapse_rows(
    columns = 1,
    valign = "middle")
```

-   I can modify the layout of my table to be more readable (e.g., `pivot_longer()` or `pivot_wider()`)

```{r}
#| label: dvs-7-ex-2
# From Lab 9, Question 6
evals |>
  filter(no_participants > 10) |>
  select(
    academic_degree, 
    seniority, 
    sex ) |>
  map_at(.at = c("academic_degree", "seniority", "sex"), .f = convert_to_factor) |>
  bind_cols() |>
  rename(
    `Academic Degree` = academic_degree,
    Sex = sex) |>
  mutate(
    `Academic Degree` = fct_recode(
      `Academic Degree`,
      "No Degree" = "no_dgr",
      "Masters"   = "ma",
      "Doctorate" = "dr",
      "Tenured Professor" = "prof"),
    Seniority = case_when(
      seniority %in% (0:5) ~ "Junior",
      seniority %in% (4:9) ~ "Senior",
      seniority %in% (8:12) ~ "Very Senior"),
    Sex = fct_recode(
      Sex,
      "Female" = "female",
      "Male"   = "male")) |>
  pivot_longer(
    cols = c(`Academic Degree`, Seniority, Sex),
    names_to = "Demographic",
    values_to = "Group") |>
  count(Demographic, Group) |>
  group_by(Demographic) |>
  mutate("%" = n *100 / sum(n)) |>
  rename("Count" = n)|>
  ungroup() |>
  kable(
    format = "html",
    caption = "Examining Counts/Proportions of Demographics for Professors in a University in Poland",
    booktabs = TRUE,
    vline = TRUE) |>
  row_spec(1:4, bold = TRUE, color = "white", background = "thistle") |>
  row_spec(5:7, bold = TRUE, color = "white", background = "palegreen3") |>
  row_spec(8:9, bold = TRUE, color = "white", background = "skyblue2") |>
  kable_styling(
    full_width = FALSE,
    bootstrap_options = "striped") |>
  column_spec(1, bold = T)|>
  collapse_rows(
    columns = 1,
    valign = "middle")
```

## Program Efficiency

**PE-1: I can write concise code which does not repeat itself.**

-   using a single function call with multiple inputs (rather than multiple function calls)

```{r}
#| label: pe-1-one-call
# From Lab 3, Question 5
teacher_evals_clean <- teacher_evals |>
  rename(sex = gender) |>
  filter( no_participants > 10) |>
  mutate(
    teacher_id = as.character(teacher_id),
    weekday =  as.character(weekday)) |>
  select(
    course_id, teacher_id, question_no, no_participants, resp_share, SET_score_avg, 
    percent_failed_cur, academic_degree, seniority, sex )
```

-   using `across()`

```{r}
#| label: pe-1-across
# From Lab 8, Problem 1
rescale_column <- function (df, cols){
  if (!is.data.frame(df)) {
    stop("`df` must be a data frame.")
  }
  df |>
    mutate(
      across(.cols = {{cols}}, 
             .fns = ~rescale_01(.x)))
}
```

-   using functions from the `map()` family

```{r}
#| label: pe-1-map-1
# From Lab 9, Question 6
evals |>
  filter(no_participants > 10) |>
  select(
    academic_degree, 
    seniority, 
    sex ) |>
  map_at(.at = c("academic_degree", "seniority", "sex"), .f = convert_to_factor) 
```

**PE-2: I can write functions to reduce repetition in my code.**

-   Example 1: Function that operates on vectors

```{r}
#| label: pe-2-1
# From Lab 9, Question 4
convert_to_factor <- function(col) {
  col = as.factor({{col}})
}
```

-   Example 2: Function that operates on data frames

```{r}
#| label: pe-2-2
# From Lab 8, Question 3
plot_function <- function(df, x, y){
  if (!is.data.frame(df)) {
    stop("`df` must be a data frame.")
  }
  x_label <- stringr::str_to_title(as_label(ensym(x)))
  y_label <- stringr::str_to_title(as_label(ensym(y)))
  
    ggplot(df, aes(x = {{ x }}, fill = {{ y }})) +
    geom_bar() +
    theme_minimal() +
    labs(
      title = glue::glue("Distribution of {x_label} by {y_label}"),
      x = x_label,
      y = "Count",
      fill = y_label)
}
```

-   Example 3: Function that operates on vectors *or* data frames

```{r}
#| label: pe-2-3
# From Lab 8, Question 2
pivot_table <- function(df, row, col){
  if (!is.data.frame(df)) {
    stop("`df` must be a data frame.")
  }
  df |>
    count({{col}}, {{row}}) |>
    pivot_wider(
      names_from = {{col}},
      values_from = n,
      values_fill = 0) |>
    janitor::adorn_totals(c("row", "col"))
}
```

**PE-3: I can use iteration to reduce repetition in my code.**

-   using `across()`

```{r}
#| label: pe-3-across
# From Lab 7, Problem 1
table_q1 <- fish |>
  summarise(
    across(everything(), ~sum(is.na(.x))))
```

-   using a `map()` function with **one** input (e.g., `map()`, `map_chr()`, `map_dbl()`, etc.)

```{r}
#| label: pe-3-map-1
# From Lab 9, Question 2
surveys |>
  map_chr(.f = ~class(.x)) |>
  enframe(
    name = "Variable",
    value = "Data Type") |>
  arrange(`Data Type`) |>
  kable(
    format = "simple",
    caption = "Data Types of Variables")
```

-   using a `map()` function with **more than one** input (e.g., `map_2()` or `pmap()`)

```{r}
#| label: pe-3-map-2
# From Lab 9, Question 4
evals |>
  map_at(.at = c("weekday", "academic_degree", "time_of_day", "sex"), 
         .f = convert_to_factor) |>
  bind_cols()
```

**PE-4: I can use modern tools when carrying out my analysis.**

-   I can use functions which are not superseded or deprecated

```{r}
#| label: pe-4-1
# Lab 4, Question 8
ca_childcare |>
  filter() |>
  ggplot(aes(x = mhi_2018, y = mfcc_infant)) +
  theme_light() +
  geom_point(alpha = 0.5, color = "plum") +
  geom_smooth(method = "lm", se = FALSE, color = "mediumorchid4") +
  labs(
    title = "Median Income (per Household) vs. Weekly Infant Childcare Cost (in California)",
    x = "Median Household Income",
    y = "Median Weekly Infant Cost") +
  scale_y_continuous(labels = scales:: label_currency(prefix = "$"))+
  scale_x_continuous(labels = scales:: label_currency(prefix = "$"))
```

-   I can connect a data wrangling pipeline into a `ggplot()`

```{r}
#| label: pe-4-2
# From Lab 7, Problem 3
fish_clean <-fish |>
  mutate(
    trip = fct_recode(
      as.factor(trip),
      "Trip 1" = "1",
      "Trip 2" = "2" )) |>
  filter(is.na(weight)) |>
  group_by(species) |>
  ggplot(aes(x = year, fill = species)) +
  geom_histogram(position = "dodge") +
  scale_fill_manual(
    values = c("Brown" = "brown3",
               "Bull" = "lightskyblue",
               "RBT" = "rosybrown1",
               "WCT" = "darkseagreen")) +
  facet_wrap(~trip) +
  theme_light() +
  geom_text(
    stat = "bin",
    aes(label = ifelse(after_stat(count) > 50, after_stat(count), "")),
    vjust = -1, 
    binwidth = 0.1,
    size = 2) +
  labs(
    title = "Looking at the Frequency of Missing Values based on Species",
    x = "Year",
    y = "Count")
```

## Data Simulation & Statistical Models

**DSSM-1: I can simulate data from a *variety* of probability models.**

-   Example 1

```{r}
#| label: dsm-1-1
# From Lab 9, Question 4
x<-runif(100, min = 0, max=1)
```

-   Example 2

```{r}
#| label: dsm-1-2
# From Lab 9, Question 4
ep<- rnorm(100,mean = 0, sd = 1)
```

**DSSM-2: I can conduct common statistical analyses in R.**

-   Example 1

```{r}
#| label: dsm-2-1
# Lab 4, Question 9
reg_mod1 <- lm( data = ca_childcare,  mfcc_infant~mhi_2018)
summary(reg_mod1)
```

-   Example 2

```{r}
#| label: dsm-2-2
# Challenge 3, Question 3
chi_test_table <- 
  table(teacher_evals_compare$set_level,
        teacher_evals_compare$sen_level)

chisq.test(chi_test_table)
```

-   Example 3

```{r}
#| label: dsm-2-3
# Lab 2, Question 17
summary(aov(weight ~ species, data = surveys))
```

## Revising My Thinking

I have revised my thinking by getting a lot more mindful about grouping functions and focusing on concise code instead of simply one that works. Grouping mutate actions and filter actions, for instance, make it both easier for me to have concise code that I can skim through to look for errors or edit, and makes it easier for others to understand my code. Initially, struggling to grasp certain concepts, I settled on dealing with small parts at a time, and didn't take the extra step of seeing if any of those steps could be consolodated into the same pipeline of code. Thus, I have revised my approach to writing code, and go back and edit my codes to ensure efficiency, and work to group actions together when possible. On top of that, going back through my code to ensure efficiency helped me get the hang of content quicker, helping ensure I was understanding what each line of code was doing and oftentimes I was able to catch errors by doing this.

## Extending My Thinking

<!-- How did you extended your thinking throughout the course? How did you extend your thinking on the code examples you have provided in your portfolio? -->

I have extended my thinking by really considering whether my color/ personal changes to my plots are helping the reader, or simply adding fun changes. At the start of this course, I would alter colors and plot features simply to test if I remembered the code, or based on my personal color preferences. However, now, I really consider which changes would help the reader, and look at it more from a Data Analyst or Statistician view, extending my thinking and contemplating what aspects of the graph are less clear, could be clearer, or any edits I could make to overall help highlight the important trends present. I also now consider if certain color combinations make the plots harder to understand, or emphasize the wrong parts of my plots, working to make the plots easily understood regardless of audience. In addition to that, working with data wrangling also made me extend my thinking, and was a bit difficult for me to grasp at first. As opposed to changes you can see visually on a graph, in data wrangling, I had trouble with the steps that were happening behind the scenes, and to grasp if the moves I was making were doing what I wanted them to. Especially with pivoting wider or longer, I had to extend my thinking in a way I hadn't done in other classes in the past, and though I struggled, through practice I was able to get the hang of it, and imagine what was happening with the data with each line of code.

## Peer Support & Collaboration

Peer Review I gave that I am proud of:

![](images/Screen%20Shot%202025-10-26%20at%2010.48.17%20PM.png){width="200"}

![](images/Screen%20Shot%202025-10-26%20at%2010.48.26%20PM.png){width="200"}

I think I grew as a collaborator by being a lot more open minded that oftentimes there are multiple different ways to approach a problem, or perform an action, most of which are not better or worse than the others. This has helped my thinking and understanding in the course, and really consider the various methods I could take to perform an action. It has also helped me compare and contrast methods or approaches and consider which is more concise, more easily understood by other viewers, or most helpful in performing the action required, or if they are simply different ways of performing the same function. I also think that throughout this course I grew in the type of feedback I would give. At first, I focused on aesthetics, and throughout the quarter this shifted towards functionality and efficiency. I learned to look for aspects to fix that were more helpful in writing code and performing functions, remarks that were more helpful going forward than commenting on the looks of the plots. And, by growing in this way as a collaborator, this actually benefited me as a coder, helping me look out for these same aspects when I was coding my own plots, functions, and tables.
